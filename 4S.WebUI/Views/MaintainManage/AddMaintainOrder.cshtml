
@{
    ViewBag.Title = "AddMaintainOrder";
    Layout = "~/Views/Shared/_LayouthomePage.cshtml";
}


<div class="layui-fluid">

    <fieldset class="layui-elem-field site-demo-button" style="margin-top: 30px;">
        <legend>新建工单</legend>
    </fieldset>
    <div style="padding: 20px; background-color: #F2F2F2;">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">客户信息</div>
                    <div class="layui-card-body">

                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">客户/预约单导入</label>


                                    <input id="type" type="text" list="typelist" placeholder="请选择">
                                    <datalist id="typelist">
                                        <option>Dimond</option>
                                        <option>vertical</option>
                                    </datalist>
                                    </div>
                                </div>
                                    <div class="layui-form-item">
                                        <div class="layui-inline">
                                            <label class="layui-form-label">客户/预约单导入</label>


                                            <input id="type" type="text" list="typelist" placeholder="请选择">
                                            <datalist id="typelist">
                                                <option>Dimond</option>
                                                <option>vertical</option>
                                            </datalist>


                                            <div class="layui-input-inline">
                                                <select name="quiz" lay-search="" id="load">
                                                    <option value="">请选择问题</option>
                                                    <optgroup label="城市记忆">
                                                        <option value="你工作的第一个城市">你工作的第一个城市</option>
                                                    </optgroup>
                                                    <optgroup label="学生时代">
                                                        <option value="你的工号">你的工号</option>
                                                        <option value="你最喜欢的老师">你最喜欢的老师</option>
                                                    </optgroup>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">客户姓名:</label>
                                        <div class="layui-input-inline">
                                            <input id="name" type="text" name="staffname" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">手机号</label>
                                        <div class="layui-input-inline">
                                            <input id="partname" type="text" name="staffname" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">住址:</label>
                                        <div class="layui-input-inline">
                                            <input id="partname" type="text" name="staffname" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                        </div>

                                    </div>
                                    <div class="layui-form-item layui-form-text">
                                        <label class="layui-form-label">规格描述</label>
                                        <div class="layui-input-block">
                                            <textarea placeholder="请输入内容" class="layui-textarea" id="descript"></textarea>
                                        </div>
                                    </div>
                                    <input type="button" class="layui-btn layui-btn-radius layui-btn-normal" value="添加项目" onclick="addProject()" />
                                    <input value="0" type="hidden" id="isorigin" />
                        </form>

                    </div>
                </div>
            </div>
            <div class="layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">车辆信息</div>
                    <div class="layui-card-body">

                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">客户/预约单导入</label>
                                    <div class="layui-input-inline">
                                        <select name="quiz" lay-search="">
                                            <option value="">请选择问题</option>
                                            <optgroup label="城市记忆">
                                                <option value="你工作的第一个城市">你工作的第一个城市</option>
                                            </optgroup>
                                            <optgroup label="学生时代">
                                                <option value="你的工号">你的工号</option>
                                                <option value="你最喜欢的老师">你最喜欢的老师</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">零件名称:</label>
                                <div class="layui-input-inline">
                                    <input id="partname" type="text" name="staffname" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">是否原厂</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="origin" value="0" lay-filter="isorigin" title="是" checked="">
                                    <input type="radio" name="origin" value="1" lay-filter="isorigin" title="否">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">归属种类:</label>
                                <div class="layui-input-inline">
                                    <select name="quiz1" lay-filter="class1" id="class1">
                                        <option value="">请选择零件种类</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline" lay-filter="name">
                                    <select id="class2" lay-filter="class2">
                                        <option value="">请选择零件种类</option>
                                    </select>
                                </div>

                            </div>
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">规格描述</label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" class="layui-textarea" id="descript"></textarea>
                                </div>
                            </div>
                            <input type="button" class="layui-btn layui-btn-radius layui-btn-normal" value="添加项目" onclick="addProject()" />
                            <input value="0" type="hidden" id="isorigin" />
                        </form>

                    </div>
                </div>
            </div>
            <div class="layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">工单信息</div>
                    <div class="layui-card-body">

                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">客户/预约单导入</label>
                                    <div class="layui-input-inline">
                                        <select name="quiz" lay-search="">
                                            <option value="">请选择问题</option>
                                            <optgroup label="城市记忆">
                                                <option value="你工作的第一个城市">你工作的第一个城市</option>
                                            </optgroup>
                                            <optgroup label="学生时代">
                                                <option value="你的工号">你的工号</option>
                                                <option value="你最喜欢的老师">你最喜欢的老师</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">零件名称:</label>
                                <div class="layui-input-inline">
                                    <input id="partname" type="text" name="staffname" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">是否原厂</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="origin" value="0" lay-filter="isorigin" title="是" checked="">
                                    <input type="radio" name="origin" value="1" lay-filter="isorigin" title="否">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">归属种类:</label>
                                <div class="layui-input-inline">
                                    <select name="quiz1" lay-filter="class1" id="class1">
                                        <option value="">请选择零件种类</option>
                                    </select>
                                </div>
                                <div class="layui-input-inline" lay-filter="name">
                                    <select id="class2" lay-filter="class2">
                                        <option value="">请选择零件种类</option>
                                    </select>
                                </div>

                            </div>
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">规格描述</label>
                                <div class="layui-input-block">
                                    <textarea placeholder="请输入内容" class="layui-textarea" id="descript"></textarea>
                                </div>
                            </div>
                            <input type="button" class="layui-btn layui-btn-radius layui-btn-normal" value="添加项目" onclick="addProject()" />
                            <input value="0" type="hidden" id="isorigin" />
                        </form>

                    </div>
                </div>
            </div>
            <div class="layui-col-md6" id="project">
                <div class="layui-card">
                    <div class="layui-card-header">零件添加</div>
                    <div class="layui-card-body">


                        <div class="layui-form-item" id="parts">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width:114px">选择维修零件</label>
                                <div class="layui-input-inline">
                                    <select name="modules" lay-verify="required" lay-search="">
                                        <option value="">直接选择或搜索选择</option>
                                        <option value="1">layer</option>
                                        <option value="2">form</option>
                                        <option value="3">layim</option>
                                        <option value="4">element</option>
                                        <option value="5">laytpl</option>
                                        <option value="6">upload</option>
                                        <option value="7">laydate</option>
                                        <option value="8">laypage</option>
                                        <option value="9">flow</option>
                                        <option value="10">util</option>
                                        <option value="11">code</option>
                                        <option value="12">tree</option>
                                        <option value="13">layedit</option>
                                        <option value="14">nav</option>
                                        <option value="15">tab</option>
                                        <option value="16">table</option>
                                        <option value="17">select</option>
                                        <option value="18">checkbox</option>
                                        <option value="19">switch</option>
                                        <option value="20">radio</option>
                                    </select>
                                </div>

                            </div>



                        </div>
                        <div class="layui-form-item" id="part">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width:114px">零件数量</label>
                                <div class="layui-input-inline">
                                    <input type="text" placeholder="请输入数量" class="layui-input" id="num" />
                                </div>


                            </div>



                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div style="margin-top: 20px;">
    <div style="margin-left:50px;margin-top:10px;margin-bottom:10px;">
        <input type="submit" class="layui-btn layui-btn-radius layui-btn-normal" value="确定" onclick="check()" />
        &nbsp;&nbsp;&nbsp;
        <input type="button" class="layui-btn layui-btn-radius layui-btn-primary" value="返回" onclick="goback()" />
    </div>
</div>
<script>
    $("#name").bind('input porpertychange', function () {
        console.log("e");
    });
    function addProject() {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.open({
                type: 1,
                title: '添加维修项目',
                content: $('#project'),
                area: ['700px', '500px'],
                shade: 0,
                btn: ['确认', '重置'],
                btnAlign: 'c',
                skin: 'layui-layer-molv'

            });
        })
    }
    function addPart() {
        layui.use('layer', function () {
            var layer = layui.layer;
            layer.open({
                type: 2,
                title: '添加项目零件',
                content: '/Home/MaintainworkOrderCreate',
                area: ['300px', '200px'],
                shade: 0,
                btn: ['确认', '重置'],
                btnAlign: 'c',
                skin: 'layui-layer-molv'


            });
        })
    }
    function render() {
        layui.use('form', function () {
            var form = layui.form;
            form.render();
        });
    }

    loadData();

    function loadData() {
        $.post('/MaintainManage/LoadCusOrAppoint', {}, function (res) {
            var htmls = "";
            for (var x in res) {
                htmls += '<option value = "' + res[x].classNum + '">' + res[x].className + '</option>';
            }
            $("#class1").html(htmls);
            render();
        });

    }

    function goback(){
        window.location.href = "/DepartManage/PartManageIndex";
    }

    function check() {
        $.post('/DepartManage/AddPartResult', { partName:$('#partname').val(),isOrigin:$('#isorigin').val(),id:
                                            $('#class2').find("option:selected").val(),qualification: $('#descript').val() }, function (res) {
                                                if (res == 1) {
                                                    setTimeout(function () {
                                                        layer.msg("添加成功！");
                                                        window.location.href = "/DepartManage/PartManageIndex";
                                                    }, 500);

            }
            else if(res == 0){
                layer.msg("添加失败，请重试。");
            }
        });
    }
    function load(value) {
        $.post('/DepartManage/PositionSelect', { id: value }, function (res) {
            console.log(value);
            var result = res.data;
            var htmls = "";
            for (var x in result) {
                htmls += '<option value = "' + result[x].classNum + '">' + result[x].className + '</option>';
            }
            $("#position").html(htmls);
            render();

        });
    }

</script>
<script>
    var app = new Vue({
        el: "#app",
        data: {
            message: "Hello Vue!"
        }
    });
    var app2 = new Vue({
        el: '#app-2',
        data: {
            message: "页面加载与" + new Date().toLocaleString()
        }
    });
    var app3 = new Vue({
        el: "#app-3",
        data: {
            seen: true
        }
    });
    var app4 = new Vue({
        el: '#app-4',
        data: {
            todos: [
                { text: "今天开始好好学习" },
                { text: "我也要好好学习" },
                { text: "我也是" }
            ]
        }
    });
    var app5 = new Vue({
        el: '#app-5',
        data: {
            message: "Hello Vue.js!"
        },
        methods: {
            reverseMessage: function () {
                this.message = this.message.split('').reverse().join('')
            }
        }
    });
    var app6 = new Vue({
        el: "#app-6",
        data: {
            message:"hello"
        }
    })
</script>
